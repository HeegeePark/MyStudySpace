# 오류 처리

## 1. 오류 처리

- 스위프트에서 오류느(Error)는 `Error`라는 프로토콜을 준수하는 타입의 값을 통해 표현.
- `Error` 프로토콜은 사실상 요구사항이 없는 빈 프로토콜일 뿐이지만, 오류를 표현하기 위한 타입(주로 열거형)은 이 프로토콜을 채택함.
- 스위프트의 열거형은 오류의 종류를 나타내기에 아주 적합한 기능
- 연관 값을 통해 오류에 관한 부가 정보를 제공할 수도 있음

<아래 예제는 프로그램 내에서 자판기를 작동시키려고 할 때 발생하는 오류상황 구현>

## 2. 오류 표현

- `Error` 프로토콜과 (주로)열거형을 통해서 오류 표현

``` swift
enum 오류종류이름: Error {
  case 종류1
  case 종류2
  case 종류3
  // ...
}
```

- 자판기 동작 오류의 종류를 표현한 VendiongMachineError 열거형

``` swift
enum VendingMachineError: Error {
  case invalidinput
  case inssufficientFunds(moneyNeeded: Int)
  case outOfStock
}
```

## 3. 함수에서 발생한 오류 던지기

자판기 동작 도중 발생한 오류를 던지는 메서드 구현

- 오류 발생의 여지가 있는 메서드는 `throws`를사용하여 오류를 내포하는 함수임을 표시

``` swift
class VendingMachine {
  let itemPrice: Int =100
  var itemCount: Int = 5
  var deposited: Int = 0
}

// 돈 받기 메서드
func receiveMoney(_ money: Int) throws {
  // 입력한 돈이 0이면 오류 던지기
  guard money > 0 else {
    throw VendingMachineError.invalidinput
  }
  
  // 오류가 없으면 정상 처리
  self.deposited += money
  print("\(money)원 받음")
}
```

