# 13_익스텐션

## 1. 익스텐션

- 익스텐션(Extension)은 스위프트의 강력한 기능 중 하나
- 익스텐션은 구조체, 클래스, 열거형, 프로토콜 타입에 새로운 기능을 추가할 수 있는 기능
- 기능을 추가하려는 타입의 구현된 소스 코드를 알지 못하거나 볼 수 없다해도, **타입만 알고 있다면** 그 타입의 기능을 확장할 수도 있음.

<<스위프트의 익스텐션이 타입에 추가할 수 있는 기능>>

- 연산 타입 프로퍼티 / 연산 인스턴스 프로퍼티
- 타입 메서드 / 인스턴스 메서드
- 이니셜라이저
- 서브스크립트
- 중첩 타입
- 특정 프로토콜을 준수할 수 있도록 기능 추가

** 익스텐션은 타입에 새로운 기능을 추가할 수 있지만, 기존에 존재하는 기능을 **재정의 불가**

<<클래스의 상속과 익스텐션 비교>>

- 이 둘은 비슷해 보이지만 실제 성격은 많이 다름

|        |    상속     |                   익스텐션                    |
| :----: | :---------: | :-------------------------------------------: |
|  확장  |  수직 확장  |                   수평 확장                   |
|  사용  | 클래스 타입 | 클래스, 구조체, 프로토콜, 제네릭 등 모든 타입 |
| 재정의 |    가능     |                    불가능                     |

​	- 수직 확장: 특정 타입을 물려받아 하나의 새로운 타입을 정의하고 추가 기능 구현

​	- 수평 확장: 기존의 타입에 기능을 추가

<<익스텐션 활용>>

- 익스텐션을 사용하는 대신 원래 타입을 정의한 소스에 기능을 추가하는 방법도 있으나, 외부 라이브러리나 프레임워크를 가져다 썼다면 원본 소스 수정 불가
- 외부에서 가져온 타입에 내가 원하는 기능을 추가하고자 할 때 익스텐션 사용
- 따로 상속을 받지 않아도 되며, 구조체와 열거형에도 기능을 추가할 수 있어 매우 편리
- 모든 타입에 대해 연산 프로퍼티, 메서드, 이니셜라이저, 서브스크립트, 중첩 데이터 타입 등 추가 가능
- 프로토콜과 함께 사용하면 매우 강력한 기능 선사



## 2. 정의

- `extension` 키워드를 사용하여 정의

``` swift
extension 확장할 타입 이름 {
  // 타입에 추가할 새로운 기능 구현
}
```

- 익스텐션은 기존에 존재하는 타입이 추가적으로 다른 프로토콜을 채택할 수 있도록 확장 가능
- 이런 경우에는 클래스나 구조체에서 사용하던 것과 똑같은 방법으로 프로토콜 이름 나열함.

``` swift
extension 확장할 타입 이름: 프로토콜1, 프로토콜2, 프로토콜3 ... {
  // 프로토콜 요구사항 구현
}
```

- 스위프트 표준 라이브러리 타입의 기능은 대부분 익스텐션으로 구현되어 있음.



## 3. 구현

<<연산 프로퍼티 추가>>

- 아래 익스텐션은 `Int` 타입에 두개의 연산 프로퍼티를 추가한 것
- `Int` 타입의 인스턴스가 홀수인지 짝수인지 판별하여 `Bool`타입으로 알려주는 연산 프로퍼티
- 익스텐션으로 `Int` 타입에 추가해준 연산 프로퍼티는 `Int` 타입의 어떤 인스턴스에도 사용 가능
- 인스턴스 연산 프로퍼티를 추가할 수도 있으며, `static` 키워드를 사용하여 타입 연산 프로퍼티도 추가 가능

``` swift
extension Int {
  var isEven: Bool {
    return self % 2 == 0
  }
  var isOdd: Bool {
    return self % 2 == 1
  }
}

print(1.isEven)	// false
print(2.isEven)	// true
print(1.isOdd)	// true
print(2.isOdd)	// false

var number: Int = 3
print(number.isEven) 	// false
print(number.isOdd) 	// true

number = 2
print(number.isEven) 	// true
print(number.isOdd) 	// false
```



<<메서드 추가>>

- 메서드 익스텐션을 통해 `Int` 타입에 인스턴스 메서드인 `multiply(by:)` 메서드를 추가
- 여러 기능을 여러 익스텐션 블록으로 나눠서 구현해도 전혀 문제 없음
- 관련된 기능별로 하나의 익스테션 블록에 묶어주는 것도 굿

``` swift
extension Int {
  func multiply(by n: Int) -> Int {
    return self * n
  }
}
print(3.multiply(by: 2))	// 6
print(4.multiply(by: 5))	// 20

number = 3
print(number.multiply(by: 2))	// 6
print(number.multiply(by: 3))	// 9
```



<<이니셜라이저 추가>>

- 인스턴스를 초기화(이니셜라이즈)할ㄷ 때 인스턴스 초기화에 필요한 다양한 데이터를 전달받을 수 있도록 여러 종류의 이니셜라이저 만들 수 있음.
- 타입의 정의부에 이니셜라이저를 추가하지 않더라도 익스텐션을 통해 이니셜라이저 추가 가능
- 익스텐션으로 클래스 타입에 편의 이니셜라이저는 추가할 수 있지만, 지정 이니셜라이저는 추가 X
  - 지정 이니셜라이저와 디이니셜라이저는 반드시 클래스 타입의 구현부에 위치해야 함.(값 타입은 상관 X)

``` swift
extension String {
  init(int: Int) {
    self = "\(Int)"
  }
  
  init(double: Double) {
    self = "\(double)"
  }
}

let stringFromInt: String = String(int: 100)	// "100"

let stringFromDouble: String = String(double: 100.0)	// "100.0"
```



** 익스텐션은 활용하면 다양하고 강력한 기능을 구현할 수 있지만, 해당 타입에 적합한 익스텐션을 구현하도록 주의해야 함.